# –û—Ç—á–µ—Ç –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –±–∞–≥–∞—Ö –≤ –ø—Ä–æ–µ–∫—Ç–µ

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ë–ê–ì–ò (XSS-—É—è–∑–≤–∏–º–æ—Å—Ç–∏)

### 1. XSS-—É—è–∑–≤–∏–º–æ—Å—Ç—å –≤ –º–µ—Ç–æ–¥–µ `createProductCard` (—Å—Ç—Ä–æ–∫–∏ 694-737)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `catalog.js:694-737`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ HTML –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å JavaScript-–∫–æ–¥.

**–£—è–∑–≤–∏–º—ã–µ –º–µ—Å—Ç–∞:**

1. **–°—Ç—Ä–æ–∫–∞ 706:** URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∏–º—è —Ç–æ–≤–∞—Ä–∞ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   ```706:706:catalog.js
   ? `<img src="${product.image}" alt="${product.name}" loading="lazy" onerror="this.style.display='none'; this.parentNode.querySelector('.product-placeholder').style.display='flex';">`
   ```
   - `${product.image}` –≤ –∞—Ç—Ä–∏–±—É—Ç–µ `src` - –≤–æ–∑–º–æ–∂–Ω–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ `javascript:` –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏–ª–∏ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö URL
   - `${product.name}` –≤ –∞—Ç—Ä–∏–±—É—Ç–µ `alt` - –≤–æ–∑–º–æ–∂–Ω–∞ XSS —á–µ—Ä–µ–∑ –∑–∞–∫—Ä—ã—Ç–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞

2. **–°—Ç—Ä–æ–∫–∞ 720:** –ò–º—è —Ç–æ–≤–∞—Ä–∞ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   ```720:720:catalog.js
   <h3 class="product-title">${product.name}</h3>
   ```
   - –ï—Å–ª–∏ `product.name` —Å–æ–¥–µ—Ä–∂–∏—Ç HTML-—Ç–µ–≥–∏, –æ–Ω–∏ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

3. **–°—Ç—Ä–æ–∫–∞ 724:** –ë—Ä–µ–Ω–¥ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   ```724:724:catalog.js
   <span class="product-brand"><strong>–ë—Ä–µ–Ω–¥:</strong> ${product.brand}</span>
   ```

4. **–°—Ç—Ä–æ–∫–∞ 725:** –¶–≤–µ—Ç –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   ```725:725:catalog.js
   <span class="product-color"><strong>–¶–≤–µ—Ç:</strong> ${product.color}</span>
   ```

5. **–°—Ç—Ä–æ–∫–∞ 727:** –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   ```727:727:catalog.js
   ${product.description ? `<p class="product-description">${product.description}</p>` : ''}
   ```

**–ü—Ä–∏–º–µ—Ä —ç–∫—Å–ø–ª–æ–π—Ç–∞:**
–ï—Å–ª–∏ –≤ CSV –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç:
- `name: <img src=x onerror="alert('XSS')">`
- `brand: <script>alert(document.cookie)</script>`
- `image: javascript:alert(1)`

–≠—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–≥–æ JavaScript –∫–æ–¥–∞.

---

### 2. XSS-—É—è–∑–≤–∏–º–æ—Å—Ç—å –≤ –º–µ—Ç–æ–¥–µ `createCheckboxFilter` (—Å—Ç—Ä–æ–∫–∏ 601-609)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `catalog.js:601-609`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–Ω–∞—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ HTML –∞—Ç—Ä–∏–±—É—Ç—ã –∏ —Ç–µ–∫—Å—Ç –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

**–£—è–∑–≤–∏–º—ã–µ –º–µ—Å—Ç–∞:**

```601:609:catalog.js
createCheckboxFilter(type, value) {
    const id = `${type}-${value.replace(/\s+/g, '-').toLowerCase()}`;
    return `
        <div class="checkbox-item">
            <input type="checkbox" id="${id}" value="${value}">
            <label for="${id}" class="checkbox-text">${value}</label>
        </div>
    `;
}
```

- **–°—Ç—Ä–æ–∫–∞ 602:** `${value}` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `id` - –≤–æ–∑–º–æ–∂–Ω–∞ –∏–Ω—ä–µ–∫—Ü–∏—è —á–µ—Ä–µ–∑ –∑–∞–∫—Ä—ã—Ç–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞
- **–°—Ç—Ä–æ–∫–∞ 605:** `${value}` –≤ –∞—Ç—Ä–∏–±—É—Ç–µ `value` - –≤–æ–∑–º–æ–∂–Ω–∞ XSS
- **–°—Ç—Ä–æ–∫–∞ 606:** `${value}` –≤ —Ç–µ–∫—Å—Ç–µ label - –≤–æ–∑–º–æ–∂–Ω–∞ XSS

**–ü—Ä–∏–º–µ—Ä —ç–∫—Å–ø–ª–æ–π—Ç–∞:**
–ï—Å–ª–∏ –±—Ä–µ–Ω–¥ –∏–ª–∏ —Ü–≤–µ—Ç –±—É–¥–µ—Ç: `"><img src=x onerror="alert('XSS')">`, —ç—Ç–æ –≤—ã–∑–æ–≤–µ—Ç XSS –∞—Ç–∞–∫—É.

---

### 3. –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `innerHTML` (4 –º–µ—Å—Ç–∞)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** 
- `catalog.js:546` - –±—Ä–µ–Ω–¥—ã
- `catalog.js:565` - —Ü–≤–µ—Ç–∞  
- `catalog.js:665` - –ø—Ä–æ–¥—É–∫—Ç—ã
- `catalog.js:758` - –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `innerHTML` –Ω–∞–ø—Ä—è–º—É—é —Å –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

```546:548:catalog.js
this.elements.brandFilters.innerHTML = brands.map(brand => 
    this.createCheckboxFilter('brand', brand)
).join('');
```

```665:667:catalog.js
this.elements.productsGrid.innerHTML = this.state.filteredProducts
    .map(product => this.createProductCard(product))
    .join('');
```

**–†–∏—Å–∫:** –õ—é–±—ã–µ HTML-—Ç–µ–≥–∏ –≤ –¥–∞–Ω–Ω—ã—Ö –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –±—Ä–∞—É–∑–µ—Ä–æ–º.

---

### 4. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤ –º–µ—Ç–æ–¥–µ `cleanString`

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `catalog.js:454-460`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `cleanString` —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏–º–≤–æ–ª—ã, –Ω–æ –Ω–µ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç HTML –ø–æ–ª–Ω–æ—Å—Ç—å—é.

```454:460:catalog.js
cleanString(str) {
    if (!str) return '';
    return str
        .replace(/['\"<>]/g, '') // –£–¥–∞–ª—è–µ–º –∫–∞–≤—ã—á–∫–∏ –∏ HTML —Å–∏–º–≤–æ–ª—ã
        .replace(/\s+/g, ' ') // –ó–∞–º–µ–Ω—è–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã –Ω–∞ –æ–¥–∏–Ω
        .trim(); // –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞—á–∞–ª–µ –∏ –∫–æ–Ω—Ü–µ
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –£–¥–∞–ª—è–µ—Ç —Å–∏–º–≤–æ–ª—ã, –Ω–æ –Ω–µ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç –∏—Ö –¥–ª—è HTML
- –ú–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏: `&lt;script&gt;` –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è `<>` –æ—Å—Ç–∞–Ω–µ—Ç—Å—è `script`, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω–æ –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö
- –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTML entities (`&amp;`, `&lt;`, `&gt;`)

---

### 5. –ò–Ω—ä–µ–∫—Ü–∏—è —á–µ—Ä–µ–∑ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `onerror` –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `catalog.js:706`

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `onerror` –≤ HTML –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞.

```706:706:catalog.js
? `<img src="${product.image}" alt="${product.name}" loading="lazy" onerror="this.style.display='none'; this.parentNode.querySelector('.product-placeholder').style.display='flex';">`
```

**–†–∏—Å–∫:** –ï—Å–ª–∏ `product.image` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π –∫–æ–¥, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω —á–µ—Ä–µ–∑ `onerror`.

---

## üü° –°–†–ï–î–ù–ò–ï –ë–ê–ì–ò

### 6. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `catalog.js:705-707`

**–ü—Ä–æ–±–ª–µ–º–∞:** URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.

- –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ URL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã (`http:`, `https:`)
- –†–∞–∑—Ä–µ—à–µ–Ω—ã `javascript:`, `data:`, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω—ã
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª–∏–Ω—ã URL

---

### 7. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** 
- `catalog.js:860-862`
- `main.js:2-9`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞—Ç–∞–ª–æ–≥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã.

```860:862:catalog.js
document.addEventListener('DOMContentLoaded', () => {
    window.catalog = new TileCatalog();
});
```

```2:9:main.js
document.addEventListener('DOMContentLoaded', function() {
    if (typeof TileCatalog !== 'undefined') {
        window.tileCatalog = new TileCatalog();
    } else {
        console.error('TileCatalog class not found');
    }
});
```

**–†–∏—Å–∫:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤, –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏.

---

## üü¢ –ù–ò–ó–ö–ò–ï –ë–ê–ì–ò / –£–ª—É—á—à–µ–Ω–∏—è

### 8. –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `catalog.js` –∏ `main.js`

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –í `catalog.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `window.catalog`
- –í `main.js` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `window.tileCatalog`

---

### 9. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Content Security Policy (CSP)

**–ü—Ä–æ–±–ª–µ–º–∞:** –í `index.html` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- Content Security Policy
- X-Frame-Options
- X-Content-Type-Options

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

1. **–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è HTML:**
   ```javascript
   function escapeHtml(text) {
       const map = {
           '&': '&amp;',
           '<': '&lt;',
           '>': '&gt;',
           '"': '&quot;',
           "'": '&#039;'
       };
       return String(text).replace(/[&<>"']/g, m => map[m]);
   }
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `textContent` –≤–º–µ—Å—Ç–æ `innerHTML` –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ**

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DOM API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫ HTML**

4. **–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º**

5. **–£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**

6. **–î–æ–±–∞–≤–∏—Ç—å CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ HTML**

---

## üîí –ü–†–ò–û–†–ò–¢–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

1. **–ö–†–ò–¢–ò–ß–ù–û** - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ XSS —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (–±–∞–≥–∏ #1, #2, #3, #4, #5)
2. **–í–ê–ñ–ù–û** - –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é URL (#6)
3. **–°–†–ï–î–ù–ï** - –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (#7)
4. **–ù–ò–ó–ö–û** - –£–ª—É—á—à–µ–Ω–∏—è (#8, #9)

